import{_ as e,o as a,c as i,ag as n}from"./chunks/framework.CbQjVMS6.js";const k=JSON.parse('{"title":"Developing Notur","description":"","frontmatter":{},"headers":[],"relativePath":"getting-started/developing.md","filePath":"getting-started/developing.md"}'),t={name:"getting-started/developing.md"};function l(p,s,o,h,r,d){return a(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="developing-notur" tabindex="-1">Developing Notur <a class="header-anchor" href="#developing-notur" aria-label="Permalink to &quot;Developing Notur&quot;">​</a></h1><p>Guide for contributing to the Notur Extension Library itself.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>PHP 8.2+</li><li>Composer 2.x</li><li>Node.js 22+</li><li>Yarn (recommended) or npm</li></ul><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">repo-ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NoturExtensionLib</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NoturExtensionLib</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install PHP dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install frontend dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>After running these commands, IDE errors for missing classes/types should resolve.</p><h2 id="project-layout" tabindex="-1">Project Layout <a class="header-anchor" href="#project-layout" aria-label="Permalink to &quot;Project Layout&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/                  PHP runtime (Laravel package)</span></span>
<span class="line"><span>bridge/               Frontend bridge runtime (TypeScript)</span></span>
<span class="line"><span>sdk/                  Extension developer SDK (TypeScript)</span></span>
<span class="line"><span>installer/            Installation scripts + React patches</span></span>
<span class="line"><span>registry/             JSON schemas + build tools</span></span>
<span class="line"><span>database/migrations/  Notur&#39;s own database tables</span></span>
<span class="line"><span>resources/views/      Blade templates shipped with Notur</span></span>
<span class="line"><span>config/               Laravel config file</span></span>
<span class="line"><span>routes/               Notur&#39;s own HTTP routes</span></span>
<span class="line"><span>tests/                Unit, integration, and frontend tests</span></span>
<span class="line"><span>docs/                 Documentation</span></span></code></pre></div><h2 id="building" tabindex="-1">Building <a class="header-anchor" href="#building" aria-label="Permalink to &quot;Building&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build bridge runtime</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:bridge</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build SDK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:sdk</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build everything</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><h2 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h2><h3 id="php-tests" tabindex="-1">PHP Tests <a class="header-anchor" href="#php-tests" aria-label="Permalink to &quot;PHP Tests&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># All tests</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./vendor/bin/phpunit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Unit tests only</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./vendor/bin/phpunit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --testsuite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Unit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Integration tests only (requires orchestra/testbench)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./vendor/bin/phpunit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --testsuite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Integration</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># With coverage</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./vendor/bin/phpunit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --coverage-text</span></span></code></pre></div><h3 id="frontend-tests" tabindex="-1">Frontend Tests <a class="header-anchor" href="#frontend-tests" aria-label="Permalink to &quot;Frontend Tests&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test:frontend</span></span></code></pre></div><h2 id="how-the-pieces-fit-together" tabindex="-1">How the Pieces Fit Together <a class="header-anchor" href="#how-the-pieces-fit-together" aria-label="Permalink to &quot;How the Pieces Fit Together&quot;">​</a></h2><h3 id="php-side" tabindex="-1">PHP Side <a class="header-anchor" href="#php-side" aria-label="Permalink to &quot;PHP Side&quot;">​</a></h3><p><code>NoturServiceProvider</code> is the entry point. Laravel discovers it via the <code>extra.laravel.providers</code> key in <code>composer.json</code>. On boot:</p><ol><li>Loads <code>config/notur.php</code> defaults</li><li>Registers Notur&#39;s own migrations, views, routes</li><li>Registers artisan commands</li><li>Calls <code>ExtensionManager::boot()</code> which: <ul><li>Reads <code>{panel}/notur/extensions.json</code></li><li>Loads each enabled extension&#39;s <code>extension.yaml</code> manifest</li><li>Resolves load order via <code>DependencyResolver</code> (topological sort)</li><li>Registers PSR-4 autoloading for each extension</li><li>Boots each extension (routes, middleware, events, views, commands)</li></ul></li><li>A view composer injects frontend data into the <code>notur::scripts</code> Blade view</li></ol><h3 id="frontend-side" tabindex="-1">Frontend Side <a class="header-anchor" href="#frontend-side" aria-label="Permalink to &quot;Frontend Side&quot;">​</a></h3><p>The bridge (<code>bridge/src/index.ts</code>) runs when <code>bridge.js</code> loads in the browser:</p><ol><li>Creates a <code>PluginRegistry</code> instance on <code>window.__NOTUR__</code></li><li>Applies default CSS custom properties</li><li>Exposes hooks, SlotRenderer, and ThemeProvider on the global</li></ol><p>Extension bundles (loaded after bridge.js) call <code>window.__NOTUR__.registry.registerSlot()</code> or use <code>createExtension()</code> from the SDK to register their components.</p><p>The patched React files contain <code>&lt;div id=&quot;notur-slot-*&quot;&gt;</code> containers. The <code>SlotRenderer</code> uses React portals to render extension components into these containers.</p><h2 id="testing-against-a-real-panel" tabindex="-1">Testing Against a Real Panel <a class="header-anchor" href="#testing-against-a-real-panel" aria-label="Permalink to &quot;Testing Against a Real Panel&quot;">​</a></h2><p>The <code>pterodactyl-panel/</code> directory contains a checkout of the panel for reference. To test the installer:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Dry-run a patch to verify it applies</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pterodactyl-panel</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">patch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dry-run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../installer/patches/v1.11/routes.ts.patch</span></span></code></pre></div><h2 id="code-style" tabindex="-1">Code Style <a class="header-anchor" href="#code-style" aria-label="Permalink to &quot;Code Style&quot;">​</a></h2><ul><li>PHP: PSR-12, strict types, PHP 8.2+ features (readonly, enums, etc.)</li><li>TypeScript: strict mode, explicit types</li><li>No unnecessary abstractions — keep it simple</li></ul><h2 id="patch-development" tabindex="-1">Patch Development <a class="header-anchor" href="#patch-development" aria-label="Permalink to &quot;Patch Development&quot;">​</a></h2><p>When the panel updates, patches may need updating. To create a new patch:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pterodactyl-panel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Make your changes to the React file</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Then generate the patch:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> diff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resources/scripts/routers/routes.ts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../installer/patches/v1.11/routes.ts.patch</span></span></code></pre></div><p>Always test patches with <code>--dry-run</code> first.</p>`,34)])])}const g=e(t,[["render",l]]);export{k as __pageData,g as default};
