!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("__NOTUR__"),require("react")):"function"==typeof define&&define.amd?define(["__NOTUR__","react"],r):"object"==typeof exports?exports.__NOTUR_EXT__=r(require("__NOTUR__"),require("react")):e.__NOTUR_EXT__=r(e.__NOTUR__,e.React)}(self,(e,r)=>(()=>{"use strict";var t={494(r){r.exports=e},36(e){e.exports=r}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}var o=a(36),l=a(494);const i="notur/cs2-modframework",s={background:"var(--notur-bg-secondary, #1a1f2e)",borderRadius:"var(--notur-radius-md, 12px)",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.08))",padding:"1.25rem",display:"flex",flexDirection:"column",gap:"1rem",transition:"border-color 0.2s, box-shadow 0.2s"},d={display:"flex",alignItems:"center",gap:"0.75rem"},c={width:"44px",height:"44px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0},u={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1rem",fontWeight:600,margin:0},m={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.8rem",margin:"2px 0 0 0",lineHeight:1.3},p={display:"flex",gap:"0.5rem",flexWrap:"wrap"},f={fontSize:"0.75rem",fontWeight:600,padding:"3px 10px",borderRadius:"6px",display:"inline-flex",alignItems:"center",gap:"4px"},g={...f,background:"rgba(34, 197, 94, 0.12)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.2)"},b={...f,background:"rgba(148, 163, 184, 0.1)",color:"#94a3b8",border:"1px solid rgba(148, 163, 184, 0.15)"},y={...f,background:"rgba(99, 102, 241, 0.1)",color:"#818cf8",border:"1px solid rgba(99, 102, 241, 0.2)"},k={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.78rem"},v={display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"auto"},x={padding:"0.5rem 1.25rem",borderRadius:"8px",border:"none",background:"#22c55e",color:"#fff",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"opacity 0.15s",display:"flex",alignItems:"center",gap:"6px"},w={...x,background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.25)"},h={...x,opacity:.5,cursor:"not-allowed",background:"rgba(148, 163, 184, 0.15)",color:"#94a3b8"},E={swiftly:"rgba(249, 115, 22, 0.15)",counterstrikesharp:"rgba(99, 102, 241, 0.15)",metamod:"rgba(14, 165, 233, 0.15)"},S={swiftly:"rgba(249, 115, 22, 0.25)",counterstrikesharp:"rgba(99, 102, 241, 0.25)",metamod:"rgba(14, 165, 233, 0.25)"},C=({framework:e,label:r,description:t,icon:n,status:a,version:l,gameInfoOk:i,dependency:C,dependencyInstalled:_,isLoading:I,onInstall:R,onUninstall:z})=>{var T;const U=null!==(T=null==a?void 0:a.installed)&&void 0!==T&&T,W={...c,background:E[e]||"rgba(148, 163, 184, 0.1)",border:`1px solid ${S[e]||"rgba(148, 163, 184, 0.15)"}`},$=C&&!_&&!U;return o.createElement("div",{style:s},o.createElement("div",{style:d},o.createElement("div",{style:W},n),o.createElement("div",null,o.createElement("h4",{style:u},r),o.createElement("p",{style:m},t))),o.createElement("div",{style:p},U?o.createElement("span",{style:g},"âœ“ Installed"):o.createElement("span",{style:b},"Not Installed"),C?o.createElement("span",{style:y},_?"âœ“ ":"","Requires ",C):null,U&&!1===i?o.createElement("span",{style:{...f,background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.2)"}},"gameinfo.gi entry missing"):null),o.createElement("div",{style:v},o.createElement("span",{style:k},l?`Latest: v${l.version}`:""),I?o.createElement("button",{style:h,disabled:!0},o.createElement("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(148, 163, 184, 0.3)",borderTopColor:"#94a3b8",borderRadius:"50%",animation:"notur-spin 0.6s linear infinite"}}),"Working..."):U?o.createElement("button",{style:w,onClick:z},"Uninstall"):o.createElement("button",{style:x,onClick:R,title:$?`${C} will be auto-installed`:void 0},"Install")))},_={position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(2px)"},I={background:"var(--notur-bg-secondary, #1a1f2e)",borderRadius:"var(--notur-radius-md, 12px)",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.08))",padding:"1.5rem",maxWidth:"440px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)"},R={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1.1rem",fontWeight:600,margin:"0 0 0.75rem 0"},z={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem",lineHeight:1.5,margin:"0 0 1rem 0"},T={background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"#f59e0b",fontSize:"0.85rem",lineHeight:1.4,margin:"0 0 1rem 0"},U={display:"flex",justifyContent:"flex-end",gap:"0.75rem"},W={padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.1))",background:"transparent",color:"var(--notur-text-secondary, #a0a8b4)",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},$={padding:"0.5rem 1.25rem",borderRadius:"8px",border:"none",color:"#fff",cursor:"pointer",fontSize:"0.875rem",fontWeight:600,minWidth:"100px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},F=({open:e,title:r,message:t,warning:n,confirmLabel:a="Confirm",confirmColor:l="#ef4444",loading:i=!1,onConfirm:s,onCancel:d})=>{if(!e)return null;const c={...$,background:l,opacity:i?.7:1,pointerEvents:i?"none":"auto"};return o.createElement("div",{style:_,onClick:i?void 0:d},o.createElement("div",{style:I,onClick:e=>e.stopPropagation()},o.createElement("h3",{style:R},r),o.createElement("p",{style:z},t),n?o.createElement("div",{style:T},n):null,o.createElement("div",{style:U},o.createElement("button",{style:W,onClick:d,disabled:i},"Cancel"),o.createElement("button",{style:c,onClick:s,disabled:i},i?o.createElement("span",null,"Working..."):a))))},{useState:j,useCallback:L}=o,M=[{key:"swiftly",label:"SwiftlyS2",description:"High-performance CS2 plugin framework. Standalone â€” no Metamod required.",icon:"âš¡"},{key:"counterstrikesharp",label:"CounterStrikeSharp",description:"C# plugin framework for CS2 servers. Requires Metamod:Source.",icon:"ðŸ”§",dependency:"metamod"},{key:"metamod",label:"Metamod:Source",description:"C++ plugin API for Source 2 engine. Required by CounterStrikeSharp.",icon:"ðŸ“¦"}],q={padding:"1.5rem",maxWidth:"900px",margin:"0 auto"},O={marginBottom:"1.5rem"},N={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1.4rem",fontWeight:700,margin:"0 0 0.35rem 0"},A={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem",margin:0},B={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},D={display:"flex",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem"},H={background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.25)",borderRadius:"10px",padding:"1rem",color:"#ef4444",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between"},P={background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"1.1rem",padding:"0 0.25rem"},X={background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.25)",borderRadius:"10px",padding:"1rem",color:"#22c55e",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between"},G="notur-cs2-modframework-styles",J=({serverUuid:e})=>{var r;const{status:t,versions:n,statusLoading:a,actionLoading:s,error:d,fetchStatus:c,installFramework:u,uninstallFramework:m}=function(e){const r=(0,l.getNoturApi)().hooks.useExtensionApi({extensionId:i,baseUrl:`/api/client/notur/${i}/servers/${e}`}),[t,n]=(0,o.useState)(null),[a,s]=(0,o.useState)(null),[d,c]=(0,o.useState)(!0),[u,m]=(0,o.useState)(null),[p,f]=(0,o.useState)(null),g=(0,o.useRef)(r.get),b=(0,o.useRef)(r.post);g.current=r.get,b.current=r.post;const y=(0,o.useCallback)(async()=>{c(!0),f(null);try{const e=await g.current("/status");n(e.data)}catch(e){f(e.message||"Failed to fetch status")}finally{c(!1)}},[]),k=(0,o.useCallback)(async()=>{try{const e=await g.current("/versions");s(e.data)}catch(e){}},[]),v=(0,o.useCallback)(async e=>{m(e),f(null);try{const r=await b.current("/install",{framework:e});return await y(),r.data}catch(r){const t=r.message||`Failed to install ${e}`;return f(t),{success:!1,framework:e,message:t}}finally{m(null)}},[y]),x=(0,o.useCallback)(async e=>{m(e),f(null);try{const r=await b.current("/uninstall",{framework:e});return await y(),r.data}catch(r){const t=r.message||`Failed to uninstall ${e}`;return f(t),{success:!1,framework:e,message:t}}finally{m(null)}},[y]);return(0,o.useEffect)(()=>{e&&(y(),k())},[e,y,k]),{status:t,versions:a,statusLoading:d,actionLoading:u,error:p,fetchStatus:y,installFramework:v,uninstallFramework:x}}(e),[p,f]=j(null),[g,b]=j(null),y=L((e,r)=>{b(null),f({open:!0,action:e,framework:r})},[]),k=L(()=>f(null),[]),v=L(async()=>{if(!p)return;let e;e="install"===p.action?await u(p.framework):await m(p.framework),e.success&&b(e.message),k()},[p,u,m,k]);return a?o.createElement("div",{style:q},o.createElement("div",{style:O},o.createElement("h2",{style:N},"Mod Frameworks"),o.createElement("p",{style:A},"Manage CS2 modding frameworks on your server")),o.createElement("div",{style:D},"Loading framework status...")):o.createElement("div",{style:q},o.createElement("div",{style:O},o.createElement("h2",{style:N},"Mod Frameworks"),o.createElement("p",{style:A},"One-click install and manage CS2 modding frameworks. Stop your server before installing.")),d?o.createElement("div",{style:H},o.createElement("span",null,d),o.createElement("button",{style:P,onClick:c,title:"Retry"},"â†»")):null,g?o.createElement("div",{style:X},o.createElement("span",null,g),o.createElement("button",{style:{...P,color:"#22c55e"},onClick:()=>b(null)},"âœ•")):null,o.createElement("div",{style:B},M.map(e=>{var r,a,l,i;const d=t?t[e.key]:null,c=n?n[e.key]:null,u=e.dependency?null!==(a=null===(r=null==t?void 0:t[e.dependency])||void 0===r?void 0:r.installed)&&void 0!==a&&a:void 0,m="counterstrikesharp"===e.key||null===(l=null==t?void 0:t.gameinfo_entries)||void 0===l?void 0:l[e.key];return o.createElement(C,{key:e.key,framework:e.key,label:e.label,description:e.description,icon:e.icon,status:d,version:c,gameInfoOk:m,dependency:e.dependency?null===(i=M.find(r=>r.key===e.dependency))||void 0===i?void 0:i.label:void 0,dependencyInstalled:u,isLoading:s===e.key||"metamod"===e.key&&"counterstrikesharp"===s,onInstall:()=>y("install",e.key),onUninstall:()=>y("uninstall",e.key)})})),o.createElement(F,{open:null!==(r=null==p?void 0:p.open)&&void 0!==r&&r,title:(()=>{if(!p)return"";const e=M.find(e=>e.key===p.framework),r=(null==e?void 0:e.label)||p.framework;return"install"===p.action?`Install ${r}`:`Uninstall ${r}`})(),message:(()=>{if(!p)return"";const e=M.find(e=>e.key===p.framework),r=(null==e?void 0:e.label)||p.framework;return"install"===p.action?`This will download and install the latest version of ${r} on your server. The server should be stopped before installing.`:`This will remove ${r} and its files from your server. Any plugins or configurations within ${r} will be lost.`})(),warning:(()=>{var e,r,n,a;if(p){if("install"===p.action&&"counterstrikesharp"===p.framework&&(null===(r=null===(e=null==t?void 0:t.metamod)||void 0===e?void 0:e.installed)||void 0===r||!r))return"Metamod:Source is not installed and will be automatically installed first, as CounterStrikeSharp requires it.";if("uninstall"===p.action&&"metamod"===p.framework&&null!==(a=null===(n=null==t?void 0:t.counterstrikesharp)||void 0===n?void 0:n.installed)&&void 0!==a&&a)return"CounterStrikeSharp is still installed and depends on Metamod. Please uninstall CounterStrikeSharp first."}})(),confirmLabel:"install"===(null==p?void 0:p.action)?"Install":"Uninstall",confirmColor:"install"===(null==p?void 0:p.action)?"#22c55e":"#ef4444",loading:null!==s,onConfirm:v,onCancel:k}))};return(0,l.createExtension)({id:"notur/cs2-modframework",slots:[{slot:"server.subnav.after",component:()=>{const e=window.location.pathname.match(/\/server\/([a-f0-9-]+)/),r=e?`/server/${e[1]}/notur/notur/cs2-modframework/mod-frameworks`:"#";return o.createElement("a",{href:r,onClick:t=>{e?(t.preventDefault(),window.location.href=r):t.preventDefault()},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",color:"var(--notur-text-secondary, #a0a8b4)",textDecoration:"none",fontSize:"0.875rem",borderRadius:"6px",transition:"color 0.15s, background 0.15s"}},o.createElement("span",{style:{fontSize:"1rem"}},"ðŸ§©"),"Mod Frameworks")},order:50,when:{server:!0}}],routes:[{area:"server",path:"/mod-frameworks",name:"Mod Frameworks",component:()=>{o.useEffect(()=>{!function(){if(document.getElementById(G))return;const e=document.createElement("style");e.id=G,e.textContent="@keyframes notur-spin { to { transform: rotate(360deg); } }",document.head.appendChild(e)}()},[]);const e=(0,l.useServerContext)();return e?o.createElement(J,{serverUuid:e.uuid}):o.createElement("div",{style:D},"Loading server context...")}}]}),{}})());