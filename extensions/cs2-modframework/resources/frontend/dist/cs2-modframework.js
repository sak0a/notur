!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.__NOTUR_EXT__=t(require("react")):e.__NOTUR_EXT__=t(e.React)}(self,e=>(()=>{"use strict";var t={36(t){t.exports=e}},n={},r=function e(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return t[r](a,a.exports,e),a.exports}(36);function o(){const e=window.__NOTUR__;if(!e)throw new Error("[Notur SDK] Bridge runtime not found. Ensure bridge.js is loaded first.");return e}const a="notur/cs2-modframework",i={background:"var(--notur-bg-secondary, #1a1f2e)",borderRadius:"var(--notur-radius-md, 12px)",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.08))",padding:"1.25rem",display:"flex",flexDirection:"column",gap:"1rem",transition:"border-color 0.2s, box-shadow 0.2s"},l={display:"flex",alignItems:"center",gap:"0.75rem"},s={width:"44px",height:"44px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0},d={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1rem",fontWeight:600,margin:0},c={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.8rem",margin:"2px 0 0 0",lineHeight:1.3},u={display:"flex",gap:"0.5rem",flexWrap:"wrap"},m={fontSize:"0.75rem",fontWeight:600,padding:"3px 10px",borderRadius:"6px",display:"inline-flex",alignItems:"center",gap:"4px"},p={...m,background:"rgba(34, 197, 94, 0.12)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.2)"},f={...m,background:"rgba(148, 163, 184, 0.1)",color:"#94a3b8",border:"1px solid rgba(148, 163, 184, 0.15)"},g={...m,background:"rgba(99, 102, 241, 0.1)",color:"#818cf8",border:"1px solid rgba(99, 102, 241, 0.2)"},y={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.78rem"},b={display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"auto"},v={padding:"0.5rem 1.25rem",borderRadius:"8px",border:"none",background:"#22c55e",color:"#fff",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"opacity 0.15s",display:"flex",alignItems:"center",gap:"6px"},x={...v,background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.25)"},k={...v,opacity:.5,cursor:"not-allowed",background:"rgba(148, 163, 184, 0.15)",color:"#94a3b8"},w={swiftly:"rgba(249, 115, 22, 0.15)",counterstrikesharp:"rgba(99, 102, 241, 0.15)",metamod:"rgba(14, 165, 233, 0.15)"},h={swiftly:"rgba(249, 115, 22, 0.25)",counterstrikesharp:"rgba(99, 102, 241, 0.25)",metamod:"rgba(14, 165, 233, 0.25)"},E=({framework:e,label:t,description:n,icon:o,status:a,version:E,gameInfoOk:S,dependency:C,dependencyInstalled:$,isLoading:I,onInstall:R,onUninstall:z})=>{var N;const _=null!==(N=null==a?void 0:a.installed)&&void 0!==N&&N,j={...s,background:w[e]||"rgba(148, 163, 184, 0.1)",border:`1px solid ${h[e]||"rgba(148, 163, 184, 0.15)"}`},D=C&&!$&&!_;return r.createElement("div",{style:i},r.createElement("div",{style:l},r.createElement("div",{style:j},o),r.createElement("div",null,r.createElement("h4",{style:d},t),r.createElement("p",{style:c},n))),r.createElement("div",{style:u},_?r.createElement("span",{style:p},"âœ“ Installed"):r.createElement("span",{style:f},"Not Installed"),C?r.createElement("span",{style:g},$?"âœ“ ":"","Requires ",C):null,_&&!1===S?r.createElement("span",{style:{...m,background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.2)"}},"gameinfo.gi entry missing"):null),r.createElement("div",{style:b},r.createElement("span",{style:y},E?`Latest: v${E.version}`:""),I?r.createElement("button",{style:k,disabled:!0},r.createElement("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(148, 163, 184, 0.3)",borderTopColor:"#94a3b8",borderRadius:"50%",animation:"notur-spin 0.6s linear infinite"}}),"Working..."):_?r.createElement("button",{style:x,onClick:z},"Uninstall"):r.createElement("button",{style:v,onClick:R,title:D?`${C} will be auto-installed`:void 0},"Install")))},S={position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(2px)"},C={background:"var(--notur-bg-secondary, #1a1f2e)",borderRadius:"var(--notur-radius-md, 12px)",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.08))",padding:"1.5rem",maxWidth:"440px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)"},$={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1.1rem",fontWeight:600,margin:"0 0 0.75rem 0"},I={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem",lineHeight:1.5,margin:"0 0 1rem 0"},R={background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"#f59e0b",fontSize:"0.85rem",lineHeight:1.4,margin:"0 0 1rem 0"},z={display:"flex",justifyContent:"flex-end",gap:"0.75rem"},N={padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.1))",background:"transparent",color:"var(--notur-text-secondary, #a0a8b4)",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},_={padding:"0.5rem 1.25rem",borderRadius:"8px",border:"none",color:"#fff",cursor:"pointer",fontSize:"0.875rem",fontWeight:600,minWidth:"100px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},j=({open:e,title:t,message:n,warning:o,confirmLabel:a="Confirm",confirmColor:i="#ef4444",loading:l=!1,onConfirm:s,onCancel:d})=>{if(!e)return null;const c={..._,background:i,opacity:l?.7:1,pointerEvents:l?"none":"auto"};return r.createElement("div",{style:S,onClick:l?void 0:d},r.createElement("div",{style:C,onClick:e=>e.stopPropagation()},r.createElement("h3",{style:$},t),r.createElement("p",{style:I},n),o?r.createElement("div",{style:R},o):null,r.createElement("div",{style:z},r.createElement("button",{style:N,onClick:d,disabled:l},"Cancel"),r.createElement("button",{style:c,onClick:s,disabled:l},l?r.createElement("span",null,"Working..."):a))))},{useState:D,useCallback:W}=r,F=[{key:"swiftly",label:"SwiftlyS2",description:"High-performance CS2 plugin framework. Standalone â€” no Metamod required.",icon:"âš¡"},{key:"counterstrikesharp",label:"CounterStrikeSharp",description:"C# plugin framework for CS2 servers. Requires Metamod:Source.",icon:"ðŸ”§",dependency:"metamod"},{key:"metamod",label:"Metamod:Source",description:"C++ plugin API for Source 2 engine. Required by CounterStrikeSharp.",icon:"ðŸ“¦"}],L={padding:"1.5rem",maxWidth:"900px",margin:"0 auto"},M={marginBottom:"1.5rem"},T={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1.4rem",fontWeight:700,margin:"0 0 0.35rem 0"},U={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem",margin:0},K={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},O={display:"flex",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem"},q={background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.25)",borderRadius:"10px",padding:"1rem",color:"#ef4444",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between"},B={background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"1.1rem",padding:"0 0.25rem"},H={background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.25)",borderRadius:"10px",padding:"1rem",color:"#22c55e",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between"},P="notur-cs2-modframework-styles",A=()=>{r.useEffect(()=>{!function(){if(document.getElementById(P))return;const e=document.createElement("style");e.id=P,e.textContent="@keyframes notur-spin { to { transform: rotate(360deg); } }",document.head.appendChild(e)}()},[]);const e=function(){const[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const e=document.getElementById("app");if(!e)return;const n=e.dataset.server;if(n)try{t(JSON.parse(n))}catch(e){}const r=window.location.pathname.match(/\/server\/([a-f0-9-]+)/);r&&t(e=>e||{uuid:r[1],name:"",node:"",isOwner:!1,status:null,permissions:[]})},[]),e}();return e?r.createElement(X,{serverUuid:e.uuid}):r.createElement("div",{style:O},"Loading server context...")},X=({serverUuid:e})=>{var t;const{status:n,versions:i,statusLoading:l,actionLoading:s,error:d,fetchStatus:c,installFramework:u,uninstallFramework:m}=function(e){const t=o().hooks.useExtensionApi({extensionId:a,baseUrl:`/api/client/notur/${a}/servers/${e}`}),[n,i]=(0,r.useState)(null),[l,s]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),g=(0,r.useRef)(t.get),y=(0,r.useRef)(t.post);g.current=t.get,y.current=t.post;const b=(0,r.useCallback)(async()=>{c(!0),f(null);try{const e=await g.current("/status");i(e.data)}catch(e){f(e.message||"Failed to fetch status")}finally{c(!1)}},[]),v=(0,r.useCallback)(async()=>{try{const e=await g.current("/versions");s(e.data)}catch(e){}},[]),x=(0,r.useCallback)(async e=>{m(e),f(null);try{const t=await y.current("/install",{framework:e});return await b(),t.data}catch(t){const n=t.message||`Failed to install ${e}`;return f(n),{success:!1,framework:e,message:n}}finally{m(null)}},[b]),k=(0,r.useCallback)(async e=>{m(e),f(null);try{const t=await y.current("/uninstall",{framework:e});return await b(),t.data}catch(t){const n=t.message||`Failed to uninstall ${e}`;return f(n),{success:!1,framework:e,message:n}}finally{m(null)}},[b]);return(0,r.useEffect)(()=>{e&&(b(),v())},[e,b,v]),{status:n,versions:l,statusLoading:d,actionLoading:u,error:p,fetchStatus:b,installFramework:x,uninstallFramework:k}}(e),[p,f]=D(null),[g,y]=D(null),b=W((e,t)=>{y(null),f({open:!0,action:e,framework:t})},[]),v=W(()=>f(null),[]),x=W(async()=>{if(!p)return;let e;e="install"===p.action?await u(p.framework):await m(p.framework),e.success&&y(e.message),v()},[p,u,m,v]);return l?r.createElement("div",{style:L},r.createElement("div",{style:M},r.createElement("h2",{style:T},"Mod Frameworks"),r.createElement("p",{style:U},"Manage CS2 modding frameworks on your server")),r.createElement("div",{style:O},"Loading framework status...")):r.createElement("div",{style:L},r.createElement("div",{style:M},r.createElement("h2",{style:T},"Mod Frameworks"),r.createElement("p",{style:U},"One-click install and manage CS2 modding frameworks. Stop your server before installing.")),d?r.createElement("div",{style:q},r.createElement("span",null,d),r.createElement("button",{style:B,onClick:c,title:"Retry"},"â†»")):null,g?r.createElement("div",{style:H},r.createElement("span",null,g),r.createElement("button",{style:{...B,color:"#22c55e"},onClick:()=>y(null)},"âœ•")):null,r.createElement("div",{style:K},F.map(e=>{var t,o,a,l;const d=n?n[e.key]:null,c=i?i[e.key]:null,u=e.dependency?null!==(o=null===(t=null==n?void 0:n[e.dependency])||void 0===t?void 0:t.installed)&&void 0!==o&&o:void 0,m="counterstrikesharp"===e.key||null===(a=null==n?void 0:n.gameinfo_entries)||void 0===a?void 0:a[e.key];return r.createElement(E,{key:e.key,framework:e.key,label:e.label,description:e.description,icon:e.icon,status:d,version:c,gameInfoOk:m,dependency:e.dependency?null===(l=F.find(t=>t.key===e.dependency))||void 0===l?void 0:l.label:void 0,dependencyInstalled:u,isLoading:s===e.key||"metamod"===e.key&&"counterstrikesharp"===s,onInstall:()=>b("install",e.key),onUninstall:()=>b("uninstall",e.key)})})),r.createElement(j,{open:null!==(t=null==p?void 0:p.open)&&void 0!==t&&t,title:(()=>{if(!p)return"";const e=F.find(e=>e.key===p.framework),t=(null==e?void 0:e.label)||p.framework;return"install"===p.action?`Install ${t}`:`Uninstall ${t}`})(),message:(()=>{if(!p)return"";const e=F.find(e=>e.key===p.framework),t=(null==e?void 0:e.label)||p.framework;return"install"===p.action?`This will download and install the latest version of ${t} on your server. The server should be stopped before installing.`:`This will remove ${t} and its files from your server. Any plugins or configurations within ${t} will be lost.`})(),warning:(()=>{var e,t,r,o;if(p){if("install"===p.action&&"counterstrikesharp"===p.framework&&(null===(t=null===(e=null==n?void 0:n.metamod)||void 0===e?void 0:e.installed)||void 0===t||!t))return"Metamod:Source is not installed and will be automatically installed first, as CounterStrikeSharp requires it.";if("uninstall"===p.action&&"metamod"===p.framework&&null!==(o=null===(r=null==n?void 0:n.counterstrikesharp)||void 0===r?void 0:r.installed)&&void 0!==o&&o)return"CounterStrikeSharp is still installed and depends on Metamod. Please uninstall CounterStrikeSharp first."}})(),confirmLabel:"install"===(null==p?void 0:p.action)?"Install":"Uninstall",confirmColor:"install"===(null==p?void 0:p.action)?"#22c55e":"#ef4444",loading:null!==s,onConfirm:x,onCancel:v}))};return function(e){const t=function(e){return"id"in e&&!("config"in e)}(e)?{...e,config:{id:e.id}}:e,{config:n,slots:r=[],routes:a=[],onInit:i,onDestroy:l,cssIsolation:s}=t,d=o();!function(e,t,n){/^[a-z0-9-]+\/[a-z0-9-]+$/.test(e)||console.warn(`[Notur SDK] Extension id "${e}" does not match vendor/name format (lowercase, hyphen-safe).`);const r=null!=t?t:[],o=null!=n?n:[],a=new Set;for(const t of r)t.slot&&"string"==typeof t.slot||console.warn(`[Notur SDK] Extension ${e} has a slot registration without a valid slot id.`),"function"!=typeof t.component&&console.warn(`[Notur SDK] Extension ${e} slot "${t.slot}" has a non-component value. Expected a React component.`);for(const t of o){t.path.startsWith("/")||console.warn(`[Notur SDK] Extension ${e} route "${t.name}" should start with "/". Received "${t.path}".`),"function"!=typeof t.component&&console.warn(`[Notur SDK] Extension ${e} route "${t.name}" has a non-component value. Expected a React component.`),t.permission&&!t.permission.includes(".")&&console.warn(`[Notur SDK] Extension ${e} route "${t.name}" uses permission "${t.permission}" without namespace (recommended: vendor.action).`);const n=`${t.area}:${t.path}`;a.has(n)?console.warn(`[Notur SDK] Extension ${e} registers duplicate route path "${t.path}" in area "${t.area}".`):a.add(n)}}(n.id,r,a);const c=function(e,t){var n,r,o;const a=null===(n=e.extensions)||void 0===n?void 0:n.find(e=>e.id===t.id),i=null!==(r=t.name)&&void 0!==r?r:null==a?void 0:a.name,l=null!==(o=t.version)&&void 0!==o?o:null==a?void 0:a.version;if(!i||!l)throw new Error(`[Notur] Extension ${t.id} is missing name/version. Provide them in createExtension() or in extension.yaml.`);return{id:t.id,name:i,version:l}}(d,n),u=function(e,t,n){var r,o;if(!0===n)return{mode:"root-class"};if(n&&"object"==typeof n)return n;const a=null===(o=null===(r=e.extensions)||void 0===r?void 0:r.find(e=>e.id===t))||void 0===o?void 0:o.cssIsolation;return a&&"object"==typeof a?"class"in a&&!a.className?{...a,className:a.class}:a:void 0}(d,n.id,s);if(d.registry.registerExtension({id:c.id,name:c.name,version:c.version,slots:r.map(e=>({...e,extensionId:n.id})),routes:a.map(e=>({...e,extensionId:n.id})),cssIsolation:u}),l&&d.registry.registerDestroyCallback(n.id,l),i)try{i()}catch(e){console.error(`[Notur] Extension ${n.id} init error:`,e)}console.log(`[Notur] Extension registered: ${c.id} v${c.version}`)}({id:"notur/cs2-modframework",slots:[{slot:"server.subnav.after",component:()=>{const e=window.location.pathname.match(/\/server\/([a-f0-9-]+)/),t=e?`/server/${e[1]}/mod-frameworks`:"#";return r.createElement("a",{href:t,onClick:n=>{e?(n.preventDefault(),window.location.href=t):n.preventDefault()},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",color:"var(--notur-text-secondary, #a0a8b4)",textDecoration:"none",fontSize:"0.875rem",borderRadius:"6px",transition:"color 0.15s, background 0.15s"}},r.createElement("span",{style:{fontSize:"1rem"}},"ðŸ§©"),"Mod Frameworks")},order:50,when:{server:!0}}],routes:[{area:"server",path:"/mod-frameworks",name:"Mod Frameworks",component:A},{area:"server",path:"/server/:id/mod-frameworks",name:"Mod Frameworks (compat)",component:A}]}),{}})());