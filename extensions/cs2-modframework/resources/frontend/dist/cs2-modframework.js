!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("React"));else if("function"==typeof define&&define.amd)define(["React"],r);else{var t="object"==typeof exports?r(require("React")):r(e.React);for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(self,e=>(()=>{"use strict";var r={883(r){r.exports=e}},t={},n=function e(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return r[n](a,a.exports,e),a.exports}(883);function o(){const e=window.__NOTUR__;if(!e)throw new Error("[Notur SDK] Bridge runtime not found. Ensure bridge.js is loaded first.");return e}const a="notur/cs2-modframework",i={background:"var(--notur-bg-secondary, #1a1f2e)",borderRadius:"var(--notur-radius-md, 12px)",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.08))",padding:"1.25rem",display:"flex",flexDirection:"column",gap:"1rem",transition:"border-color 0.2s, box-shadow 0.2s"},l={display:"flex",alignItems:"center",gap:"0.75rem"},s={width:"44px",height:"44px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0},d={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1rem",fontWeight:600,margin:0},c={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.8rem",margin:"2px 0 0 0",lineHeight:1.3},u={display:"flex",gap:"0.5rem",flexWrap:"wrap"},m={fontSize:"0.75rem",fontWeight:600,padding:"3px 10px",borderRadius:"6px",display:"inline-flex",alignItems:"center",gap:"4px"},f={...m,background:"rgba(34, 197, 94, 0.12)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.2)"},p={...m,background:"rgba(148, 163, 184, 0.1)",color:"#94a3b8",border:"1px solid rgba(148, 163, 184, 0.15)"},g={...m,background:"rgba(99, 102, 241, 0.1)",color:"#818cf8",border:"1px solid rgba(99, 102, 241, 0.2)"},y={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.78rem"},b={display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"auto"},v={padding:"0.5rem 1.25rem",borderRadius:"8px",border:"none",background:"#22c55e",color:"#fff",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"opacity 0.15s",display:"flex",alignItems:"center",gap:"6px"},k={...v,background:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.25)"},x={...v,opacity:.5,cursor:"not-allowed",background:"rgba(148, 163, 184, 0.15)",color:"#94a3b8"},w={swiftly:"rgba(249, 115, 22, 0.15)",counterstrikesharp:"rgba(99, 102, 241, 0.15)",metamod:"rgba(14, 165, 233, 0.15)"},h={swiftly:"rgba(249, 115, 22, 0.25)",counterstrikesharp:"rgba(99, 102, 241, 0.25)",metamod:"rgba(14, 165, 233, 0.25)"},E=({framework:e,label:r,description:t,icon:o,status:a,version:E,gameInfoOk:S,dependency:C,dependencyInstalled:I,isLoading:R,onInstall:z,onUninstall:$})=>{var j;const W=null!==(j=null==a?void 0:a.installed)&&void 0!==j&&j,F={...s,background:w[e]||"rgba(148, 163, 184, 0.1)",border:`1px solid ${h[e]||"rgba(148, 163, 184, 0.15)"}`},L=C&&!I&&!W;return n.createElement("div",{style:i},n.createElement("div",{style:l},n.createElement("div",{style:F},o),n.createElement("div",null,n.createElement("h4",{style:d},r),n.createElement("p",{style:c},t))),n.createElement("div",{style:u},W?n.createElement("span",{style:f},"âœ“ Installed"):n.createElement("span",{style:p},"Not Installed"),C?n.createElement("span",{style:g},I?"âœ“ ":"","Requires ",C):null,W&&!1===S?n.createElement("span",{style:{...m,background:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",border:"1px solid rgba(245, 158, 11, 0.2)"}},"gameinfo.gi entry missing"):null),n.createElement("div",{style:b},n.createElement("span",{style:y},E?`Latest: v${E.version}`:""),R?n.createElement("button",{style:x,disabled:!0},n.createElement("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(148, 163, 184, 0.3)",borderTopColor:"#94a3b8",borderRadius:"50%",animation:"notur-spin 0.6s linear infinite"}}),"Working..."):W?n.createElement("button",{style:k,onClick:$},"Uninstall"):n.createElement("button",{style:v,onClick:z,title:L?`${C} will be auto-installed`:void 0},"Install")))},S={position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(2px)"},C={background:"var(--notur-bg-secondary, #1a1f2e)",borderRadius:"var(--notur-radius-md, 12px)",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.08))",padding:"1.5rem",maxWidth:"440px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)"},I={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1.1rem",fontWeight:600,margin:"0 0 0.75rem 0"},R={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem",lineHeight:1.5,margin:"0 0 1rem 0"},z={background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"#f59e0b",fontSize:"0.85rem",lineHeight:1.4,margin:"0 0 1rem 0"},$={display:"flex",justifyContent:"flex-end",gap:"0.75rem"},j={padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid var(--notur-border, rgba(255, 255, 255, 0.1))",background:"transparent",color:"var(--notur-text-secondary, #a0a8b4)",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},W={padding:"0.5rem 1.25rem",borderRadius:"8px",border:"none",color:"#fff",cursor:"pointer",fontSize:"0.875rem",fontWeight:600,minWidth:"100px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},F=({open:e,title:r,message:t,warning:o,confirmLabel:a="Confirm",confirmColor:i="#ef4444",loading:l=!1,onConfirm:s,onCancel:d})=>{if(!e)return null;const c={...W,background:i,opacity:l?.7:1,pointerEvents:l?"none":"auto"};return n.createElement("div",{style:S,onClick:l?void 0:d},n.createElement("div",{style:C,onClick:e=>e.stopPropagation()},n.createElement("h3",{style:I},r),n.createElement("p",{style:R},t),o?n.createElement("div",{style:z},o):null,n.createElement("div",{style:$},n.createElement("button",{style:j,onClick:d,disabled:l},"Cancel"),n.createElement("button",{style:c,onClick:s,disabled:l},l?n.createElement("span",null,"Working..."):a))))},{useState:L,useCallback:M}=n,N=[{key:"swiftly",label:"SwiftlyS2",description:"High-performance CS2 plugin framework. Standalone â€” no Metamod required.",icon:"âš¡"},{key:"counterstrikesharp",label:"CounterStrikeSharp",description:"C# plugin framework for CS2 servers. Requires Metamod:Source.",icon:"ðŸ”§",dependency:"metamod"},{key:"metamod",label:"Metamod:Source",description:"C++ plugin API for Source 2 engine. Required by CounterStrikeSharp.",icon:"ðŸ“¦"}],U={padding:"1.5rem",maxWidth:"900px",margin:"0 auto"},q={marginBottom:"1.5rem"},T={color:"var(--notur-text-primary, #f0f0f0)",fontSize:"1.4rem",fontWeight:700,margin:"0 0 0.35rem 0"},B={color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem",margin:0},D={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},O={display:"flex",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",color:"var(--notur-text-secondary, #a0a8b4)",fontSize:"0.9rem"},_={background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.25)",borderRadius:"10px",padding:"1rem",color:"#ef4444",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between"},H={background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"1.1rem",padding:"0 0.25rem"},P={background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.25)",borderRadius:"10px",padding:"1rem",color:"#22c55e",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between"},A="notur-cs2-modframework-styles",J=({serverUuid:e})=>{var r;const{status:t,versions:i,statusLoading:l,actionLoading:s,error:d,fetchStatus:c,installFramework:u,uninstallFramework:m}=function(e){const r=o().hooks.useExtensionApi({extensionId:a,baseUrl:`/api/client/notur/${a}/servers/${e}`}),[t,i]=(0,n.useState)(null),[l,s]=(0,n.useState)(null),[d,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),[f,p]=(0,n.useState)(null),g=(0,n.useRef)(r.get),y=(0,n.useRef)(r.post);g.current=r.get,y.current=r.post;const b=(0,n.useCallback)(async()=>{c(!0),p(null);try{const e=await g.current("/status");i(e.data)}catch(e){p(e.message||"Failed to fetch status")}finally{c(!1)}},[]),v=(0,n.useCallback)(async()=>{try{const e=await g.current("/versions");s(e.data)}catch(e){}},[]),k=(0,n.useCallback)(async e=>{m(e),p(null);try{const r=await y.current("/install",{framework:e});return await b(),r.data}catch(r){const t=r.message||`Failed to install ${e}`;return p(t),{success:!1,framework:e,message:t}}finally{m(null)}},[b]),x=(0,n.useCallback)(async e=>{m(e),p(null);try{const r=await y.current("/uninstall",{framework:e});return await b(),r.data}catch(r){const t=r.message||`Failed to uninstall ${e}`;return p(t),{success:!1,framework:e,message:t}}finally{m(null)}},[b]);return(0,n.useEffect)(()=>{e&&(b(),v())},[e,b,v]),{status:t,versions:l,statusLoading:d,actionLoading:u,error:f,fetchStatus:b,installFramework:k,uninstallFramework:x}}(e),[f,p]=L(null),[g,y]=L(null),b=M((e,r)=>{y(null),p({open:!0,action:e,framework:r})},[]),v=M(()=>p(null),[]),k=M(async()=>{if(!f)return;let e;e="install"===f.action?await u(f.framework):await m(f.framework),e.success&&y(e.message),v()},[f,u,m,v]);return l?n.createElement("div",{style:U},n.createElement("div",{style:q},n.createElement("h2",{style:T},"Mod Frameworks"),n.createElement("p",{style:B},"Manage CS2 modding frameworks on your server")),n.createElement("div",{style:O},"Loading framework status...")):n.createElement("div",{style:U},n.createElement("div",{style:q},n.createElement("h2",{style:T},"Mod Frameworks"),n.createElement("p",{style:B},"One-click install and manage CS2 modding frameworks. Stop your server before installing.")),d?n.createElement("div",{style:_},n.createElement("span",null,d),n.createElement("button",{style:H,onClick:c,title:"Retry"},"â†»")):null,g?n.createElement("div",{style:P},n.createElement("span",null,g),n.createElement("button",{style:{...H,color:"#22c55e"},onClick:()=>y(null)},"âœ•")):null,n.createElement("div",{style:D},N.map(e=>{var r,o,a,l;const d=t?t[e.key]:null,c=i?i[e.key]:null,u=e.dependency?null!==(o=null===(r=null==t?void 0:t[e.dependency])||void 0===r?void 0:r.installed)&&void 0!==o&&o:void 0,m="counterstrikesharp"===e.key||null===(a=null==t?void 0:t.gameinfo_entries)||void 0===a?void 0:a[e.key];return n.createElement(E,{key:e.key,framework:e.key,label:e.label,description:e.description,icon:e.icon,status:d,version:c,gameInfoOk:m,dependency:e.dependency?null===(l=N.find(r=>r.key===e.dependency))||void 0===l?void 0:l.label:void 0,dependencyInstalled:u,isLoading:s===e.key||"metamod"===e.key&&"counterstrikesharp"===s,onInstall:()=>b("install",e.key),onUninstall:()=>b("uninstall",e.key)})})),n.createElement(F,{open:null!==(r=null==f?void 0:f.open)&&void 0!==r&&r,title:(()=>{if(!f)return"";const e=N.find(e=>e.key===f.framework),r=(null==e?void 0:e.label)||f.framework;return"install"===f.action?`Install ${r}`:`Uninstall ${r}`})(),message:(()=>{if(!f)return"";const e=N.find(e=>e.key===f.framework),r=(null==e?void 0:e.label)||f.framework;return"install"===f.action?`This will download and install the latest version of ${r} on your server. The server should be stopped before installing.`:`This will remove ${r} and its files from your server. Any plugins or configurations within ${r} will be lost.`})(),warning:(()=>{var e,r,n,o;if(f){if("install"===f.action&&"counterstrikesharp"===f.framework&&(null===(r=null===(e=null==t?void 0:t.metamod)||void 0===e?void 0:e.installed)||void 0===r||!r))return"Metamod:Source is not installed and will be automatically installed first, as CounterStrikeSharp requires it.";if("uninstall"===f.action&&"metamod"===f.framework&&null!==(o=null===(n=null==t?void 0:t.counterstrikesharp)||void 0===n?void 0:n.installed)&&void 0!==o&&o)return"CounterStrikeSharp is still installed and depends on Metamod. Please uninstall CounterStrikeSharp first."}})(),confirmLabel:"install"===(null==f?void 0:f.action)?"Install":"Uninstall",confirmColor:"install"===(null==f?void 0:f.action)?"#22c55e":"#ef4444",loading:null!==s,onConfirm:k,onCancel:v}))};return function(e){const r=function(e){return"id"in e&&!("config"in e)}(e)?{...e,config:{id:e.id}}:e,{config:t,slots:n=[],routes:a=[],onInit:i,onDestroy:l,cssIsolation:s}=r,d=o(),c=function(e,r){var t,n,o;const a=null===(t=e.extensions)||void 0===t?void 0:t.find(e=>e.id===r.id),i=null!==(n=r.name)&&void 0!==n?n:null==a?void 0:a.name,l=null!==(o=r.version)&&void 0!==o?o:null==a?void 0:a.version;if(!i||!l)throw new Error(`[Notur] Extension ${r.id} is missing name/version. Provide them in createExtension() or in extension.yaml.`);return{id:r.id,name:i,version:l}}(d,t),u=function(e,r,t){var n,o;if(!0===t)return{mode:"root-class"};if(t&&"object"==typeof t)return t;const a=null===(o=null===(n=e.extensions)||void 0===n?void 0:n.find(e=>e.id===r))||void 0===o?void 0:o.cssIsolation;return a&&"object"==typeof a?"class"in a&&!a.className?{...a,className:a.class}:a:void 0}(d,t.id,s);if(d.registry.registerExtension({id:c.id,name:c.name,version:c.version,slots:n.map(e=>({...e,extensionId:t.id})),routes:a.map(e=>({...e,extensionId:t.id})),cssIsolation:u}),l&&d.registry.registerDestroyCallback(t.id,l),i)try{i()}catch(e){console.error(`[Notur] Extension ${t.id} init error:`,e)}console.log(`[Notur] Extension registered: ${c.id} v${c.version}`)}({id:"notur/cs2-modframework",slots:[{slot:"server.subnav.after",component:()=>n.createElement("a",{href:"#",onClick:e=>{e.preventDefault();const r=window.location.pathname.match(/\/server\/([a-f0-9-]+)/);r&&(window.location.href=`/server/${r[1]}/mod-frameworks`)},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",color:"var(--notur-text-secondary, #a0a8b4)",textDecoration:"none",fontSize:"0.875rem",borderRadius:"6px",transition:"color 0.15s, background 0.15s"}},n.createElement("span",{style:{fontSize:"1rem"}},"ðŸ§©"),"Mod Frameworks"),order:50,when:{server:!0}}],routes:[{area:"server",path:"/mod-frameworks",name:"Mod Frameworks",component:()=>{n.useEffect(()=>{!function(){if(document.getElementById(A))return;const e=document.createElement("style");e.id=A,e.textContent="@keyframes notur-spin { to { transform: rotate(360deg); } }",document.head.appendChild(e)}()},[]);const e=function(){const[e,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{const e=document.getElementById("app");if(!e)return;const t=e.dataset.server;if(t)try{r(JSON.parse(t))}catch(e){}const n=window.location.pathname.match(/\/server\/([a-f0-9-]+)/);n&&r(e=>e||{uuid:n[1],name:"",node:"",isOwner:!1,status:null,permissions:[]})},[]),e}();return e?n.createElement(J,{serverUuid:e.uuid}):n.createElement("div",{style:O},"Loading server context...")}}]}),{}})());